PLUGIN_DIR="$CONFIG_DIR/plugins"

##### Tokyo Night Storm Theme #####
BAR_COLOR=0xff24283b
ICON_COLOR=0xffc0caf5
LABEL_COLOR=0xffc0caf5
HIGHLIGHT=0xff7aa2f7
DIM=0xff565f89

##### Bar Appearance #####
sketchybar --bar position=top \
                 height=32 \
                 color=$BAR_COLOR \
                 blur_radius=0 \
                 shadow=off \
                 sticky=on \
                 topmost=on

##### Changing Defaults #####
default=(
  padding_left=5
  padding_right=5
  icon.font="JetBrainsMono Nerd Font Mono:Bold:20.0"
  label.font="JetBrainsMono Nerd Font Mono:Regular:13.0"
  icon.color=$ICON_COLOR
  label.color=$LABEL_COLOR
  icon.padding_left=4
  icon.padding_right=4
  label.padding_left=4
  label.padding_right=4
)
sketchybar --default "${default[@]}"

##### Power Menu #####
sketchybar --add item power left \
           --set power icon="⏻" \
                       icon.color=$HIGHLIGHT \
                       label.drawing=off \
                       click_script="$PLUGIN_DIR/power.sh"

##### AeroSpace Workspace Indicators #####
for sid in 1 2 3 4 5; do
  sketchybar --add item workspace."$sid" left \
             --set workspace."$sid" \
                   icon="$sid" \
                   icon.font="JetBrainsMono Nerd Font Mono:Bold:14.0" \
                   icon.color=$DIM \
                   icon.highlight_color=$ICON_COLOR \
                   icon.padding_left=8 \
                   icon.padding_right=8 \
                   background.color=$HIGHLIGHT \
                   background.corner_radius=5 \
                   background.height=22 \
                   background.drawing=off \
                   label.drawing=off \
                   script="$PLUGIN_DIR/aerospace.sh" \
                   click_script="aerospace workspace $sid"
done

##### Front App #####
sketchybar --add item front_app left \
           --set front_app icon.drawing=off \
                           label.color=$ICON_COLOR \
                           script="$PLUGIN_DIR/front_app.sh" \
           --subscribe front_app front_app_switched

##### Right Items #####
sketchybar --add item clock right \
           --set clock update_freq=10 \
                       icon= \
                       icon.color=$HIGHLIGHT \
                       script="$PLUGIN_DIR/clock.sh" \
           --add item volume right \
           --set volume icon.color=$HIGHLIGHT \
                        script="$PLUGIN_DIR/volume.sh" \
           --subscribe volume volume_change \
           --add item battery right \
           --set battery update_freq=120 \
                         icon.color=$HIGHLIGHT \
                         script="$PLUGIN_DIR/battery.sh" \
           --subscribe battery system_woke power_source_change \
           --add item screenshot right \
           --set screenshot icon="󰄀" \
                            icon.color=$HIGHLIGHT \
                            label.drawing=off \
                            click_script="open -a Screenshot" \
           --add item vpn right \
           --set vpn update_freq=5 \
                     icon="󰌿" \
                     icon.color=$DIM \
                     label.drawing=on \
                     script="$PLUGIN_DIR/vpn.sh" \
                     click_script="$PLUGIN_DIR/vpn_click.sh"

##### Force all scripts to run the first time #####
sketchybar --update
